#!/bin/bash

API_URL="http://192.168.0.1:9090/goform/goform_get_cmd_process?cmd=getAllDeviceInfo"
LOG_FILE="./get.json"






#		â€¢==========â€¢		#
#SHELLé¢œè‰²
#	â€¢====[é‡ç½®]====â€¢	#
COLOR_OFF='\033[0m'			# é‡ç½®
#	â€¢====[å¸¸è§„]====â€¢	#
BLACK='\033[0;30m'			# é»‘è‰²
RED='\033[0;31m'			# çº¢è‰²
GREEN='\033[0;32m'			# ç»¿è‰²
YELLOW='\033[0;33m'			# é»„è‰²
BLUE='\033[0;34m'			# è“è‰²
PURPLE='\033[0;35m'			# ç´«è‰²
CYAN='\033[0;36m'			# é’è‰²
WHITE='\033[0;37m'			# ç™½è‰²
#	â€¢====[ç²—ä½“]====â€¢	#
BBLACK='\033[1;30m'			# é»‘è‰²
BRED='\033[1;31m'			# çº¢è‰²
BGREEN='\033[1;32m'			# ç»¿è‰²
BYELLOW='\033[1;33m'		# é»„è‰²
BBLUE='\033[1;34m'			# è“è‰²
BPURPLE='\033[1;35m'		# ç´«è‰²
BCYAN='\033[1;36m'			# é’è‰²
BWHITE='\033[1;37m'			# ç™½è‰²
#	â€¢====[ä¸‹åˆ’çº¿]====â€¢	#
UBLACK='\033[4;30m'			# é»‘è‰²
URED='\033[4;31m'			# çº¢è‰²
UGREEN='\033[4;32m'			# ç»¿è‰²
UYELLOW='\033[4;33m'		# é»„è‰²
UBLUE='\033[4;34m'			# è“è‰²
UPURPLE='\033[4;35m'		# ç´«è‰²
UCYAN='\033[4;36m'			# é’è‰²
UWHITE='\033[4;37m'			# ç™½è‰²
#	â€¢====[èƒŒæ™¯]====â€¢	#
ON_BLACK='\033[40m'			# é»‘è‰²
ON_RED='\033[41m'			# çº¢è‰²
ON_GREEN='\033[42m'			# ç»¿è‰²
ON_YELLOW='\033[43m'		# é»„è‰²
ON_BLUE='\033[44m'			# è“è‰²
ON_PURPLE='\033[45m'		# ç´«è‰²
ON_CYAN='\033[46m'			# é’è‰²
ON_WHITE='\033[47m'			# ç™½è‰²
#		â€¢==========â€¢		#

WLOG(){
echo "" >> $LOG_FILE
echo "#>ï¼»$(date +"%Y-%m-%d_%H:%M:%S")ï¼½<#" >> $LOG_FILE
echo $getbin | jq >> $LOG_FILE
}
# ä½¿ç”¨curlå‘½ä»¤è·å–JSONæ•°æ®
getbin=$(curl -s "$API_URL")

# æ£€æŸ¥æ˜¯å¦æˆåŠŸè·å–åˆ°JSONæ•°æ®
if [ -z "$getbin" ]; then
  echo -e "[${RED}ERROR${COLOR_OFF}]æ— æ³•è·å–è®¾å¤‡ä¿¡æ¯"
  exit 1
else
 echo -e "[${GREEN}OK${COLOR_OFF}]GET API"
 echo â€¢==========â€¢
 WLOG
fi
#		è®¡ç®—
rateup=$(echo "scale=0; $(echo $getbin | jq -r '.rateup') / 1" | bc)
ratedown=$(echo "scale=0; $(echo $getbin | jq -r '.ratedown') / 1" | bc)
dataup=$(echo "scale=2; $(echo $getbin | jq -r '.dataup') / 1024" | bc)
datadown=$(echo "scale=2; $(echo $getbin | jq -r '.datadown') / 1024" | bc)
#		â€¢==========â€¢		#

#		å€¼
device="$(echo $getbin | jq -r .device)"
devtype="$(echo $getbin | jq -r .devtype)"
version="$(echo $getbin | jq -r .version)"
verfw="$(echo $getbin | jq -r .verfw)"
uptime="$(echo $getbin | jq -r .uptime)"
battery="$(echo $getbin | jq -r .battery)"
batlevel="$(echo $getbin | jq -r .batlevel)"
charging="$(echo $getbin | jq -r .charging)"
discharging="$(echo $getbin | jq -r .discharging)"
voltage="$(echo $getbin | jq -r .voltage)"
imei="$(echo $getbin | jq -r .imei)"
imsi="$(echo $getbin | jq -r .imsi)"
ispid="$(echo $getbin | jq -r .ispid)"
rsigdbm="$(echo $getbin | jq -r .rsigdbm)"
sigtype="$(echo $getbin | jq -r .sigtype)"
wifissid="$(echo $getbin | jq -r .wifissid)"
wifipwd="$(echo $getbin | jq -r .wifipwd)"
ssidhide="$(echo $getbin | jq -r .ssidhide)"
wifimode="$(echo $getbin | jq -r .wifimode)"
dns1="$(echo $getbin | jq -r .dns1)"
dns2="$(echo $getbin | jq -r .dns2)"
clients="$(echo $getbin | jq -r .clients)"
clients="$(echo $getbin | jq -r .clients)"
powermode="$(echo $getbin | jq -r .powermode)"
logEnable="$(echo $getbin | jq -r .logEnable)"
#		â€¢==========â€¢		#

#		è¾“å‡º
echo -e "ğŸ’ ${BBLUE}è®¾å¤‡ä¿¡æ¯${COLOR_OFF}ï¼š"
echo -e "| ${CYAN}è®¾å¤‡ä¸²å·${COLOR_OFF}:  ${device}${COLOR_OFF}"
echo -e "| ${CYAN}è®¾å¤‡ç±»å‹${COLOR_OFF}:  ${devtype}${COLOR_OFF}"
echo -e "| ${CYAN}ç‰ˆæœ¬${COLOR_OFF}:      ${version}${COLOR_OFF}"
echo -e "| ${CYAN}å›ºä»¶ç‰ˆæœ¬${COLOR_OFF}:  ${verfw}${COLOR_OFF}"
echo -e "â”” ${CYAN}åœ¨çº¿æ—¶é•¿${COLOR_OFF}:  ${uptime}s${COLOR_OFF}"
echo -e â€¢==========â€¢
echo -e "ğŸ”‹${BBLUE}ç”µæ± ä¿¡æ¯${COLOR_OFF}ï¼š"
echo -e "| ${GREEN}ç”µé‡${COLOR_OFF}:      ${YELLOW}${battery}%${COLOR_OFF}"
echo -e "| ${GREEN}ç”µé‡ç­‰çº§${COLOR_OFF}:  ${YELLOW}${batlevel}${COLOR_OFF}"
echo -e "| ${GREEN}å……ç”µçŠ¶æ€${COLOR_OFF}:  ${YELLOW}${charging}${COLOR_OFF}"
echo -e "| ${GREEN}æ”¾ç”µçŠ¶æ€${COLOR_OFF}:  ${YELLOW}${discharging}${COLOR_OFF}"
echo -e "â”” ${GREEN}ç”µå‹${COLOR_OFF}:      ${YELLOW}${voltage}${COLOR_OFF}"
echo -e â€¢==========â€¢
echo -e "ğŸŒ${BBLUE}ç½‘ç»œä¿¡æ¯${COLOR_OFF}ï¼š"
# echo -e "| ${GREEN}IMEI${COLOR_OFF}:      ${YELLOW}${imei}${COLOR_OFF}"
# echo -e "| ${GREEN}IMSI${COLOR_OFF}:      ${YELLOW}${imsi}${COLOR_OFF}"
echo -e "| ${GREEN}è¿è¥å•†ID${COLOR_OFF}:  ${YELLOW}${ispid}${COLOR_OFF}"
echo -e "| ${GREEN}ä¿¡å·å¼ºåº¦${COLOR_OFF}:  ${YELLOW}${rsigdbm}${COLOR_OFF} ${CYAN}dBm${COLOR_OFF}"
echo -e "| ${GREEN}ä¿¡å·ç±»å‹${COLOR_OFF}:  ${YELLOW}${sigtype}${COLOR_OFF}"
echo -e "| ${GREEN}é€Ÿç‡${COLOR_OFF}:      ${YELLOW}${rateup}${COLOR_OFF} ${CYAN}Kbps${COLOR_OFF} â†‘ ä¸¨ ${YELLOW}${ratedown}${COLOR_OFF} ${CYAN}Kbps${COLOR_OFF} â†“"
echo -e "â”” ${GREEN}æ•°æ®é‡${COLOR_OFF}:    ${YELLOW}${dataup}${COLOR_OFF} ${CYAN}MB${COLOR_OFF} â†‘ ä¸¨ ${YELLOW}${datadown}${COLOR_OFF} ${CYAN}MB${COLOR_OFF} â†“"
echo -e â€¢==========â€¢
echo -e "ğŸ”‘${BBLUE}WiFiä¿¡æ¯${COLOR_OFF}ï¼š"
echo -e "| ${GREEN}SSID${COLOR_OFF}:      ${YELLOW}${wifissid}${COLOR_OFF}"
echo -e "| ${GREEN}PWD${COLOR_OFF}:       ${YELLOW}${wifipwd}${COLOR_OFF}"
echo -e "| ${GREEN}HIDE${COLOR_OFF}:      ${YELLOW}${ssidhide}${COLOR_OFF}"
echo -e "| ${GREEN}WiFié¢‘æ®µ${COLOR_OFF}:  ${YELLOW}${wifimode}  ${PURPLE}[${COLOR_OFF}${CYAN}0${COLOR_OFF}ï¼š${YELLOW}2.4Ghz${COLOR_OFF}ã€${CYAN}1${COLOR_OFF}ï¼š${YELLOW}5.8Ghz${COLOR_OFF}${PURPLE}]${COLOR_OFF}"
echo -e "| ${GREEN}DNS${COLOR_OFF}:       [${YELLOW}${dns1}${COLOR_OFF}ä¸¨${YELLOW}${dns2}${COLOR_OFF}]"
echo -e "â”” ${GREEN}å·²è¿æ¥è®¾å¤‡${COLOR_OFF}:${clients}${COLOR_OFF}"
echo -e â€¢==========â€¢
echo -e "ğŸ“ƒ${BBLUE}å…¶ä»–ä¿¡æ¯${COLOR_OFF}ï¼š"
echo -e "| ${GREEN}ç”µæºæ¨¡å¼${COLOR_OFF}:  ${YELLOW}${powermode}${COLOR_OFF}"
echo -e "â”” ${GREEN}æ—¥å¿—è®°å½•${COLOR_OFF}:  ${YELLOW}${logEnable}${COLOR_OFF}"